{% load static %}

<div id="condition-builder" class="border rounded-lg p-3 bg-white shadow">
    <!-- Condition builder will be rendered here by condition_builder.js -->
</div>

<script id="indicators-data" type="application/json">
    {{ indicators_json|safe }}
</script>
<script type="module">
    import { initConditionBuilder } from "{% static 'strategies/main.js' %}";
    const indicatorsData = JSON.parse(
        document.getElementById('indicators-data').textContent
    );
    
    document.addEventListener('DOMContentLoaded', () => {
        const conditionBuilder = initConditionBuilder(
            '#condition-builder',
            indicatorsData
        );

    document.querySelector('.hide-strategy-builder')
        ?.addEventListener('click', () => {
            conditionBuilder.clear();
        });
});
</script>